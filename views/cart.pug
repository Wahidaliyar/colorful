extends base

block append head 
    script(src="https://js.stripe.com/v3/")
    script(src="/js/stripe.js" type="module")

block content 
    section(class="pt-28 px-4")
        div(class="bg-white md:w-[40%] mx-auto text-center px-6 py-6 shadow-[1px_2px_4px_0_rgba(0,0,0,0.2)]")
            p(class="font-mehr text-2xl md:text-3xl border-b-2 border-red inline-block") سبد خرید
            div
            - let totalPrice = 0
            - let artworkIds = ''
                if items.length === 0
                    p(class="font-IRanSans pt-6 pb-4") موردی موجود نیست!
                else 
                    table(class="mt-8 w-full")
                        thead
                            tr(class="font-IRanSans flex justify-around border-b-2 border-slate-300")
                                th(class="flex-[2] text-right mr-8") نقاشی
                                th(class="flex-1") قیمت


                        tbody(class="border-b-2 border-slate-300")
                            each item in items
                                tr(class="flex justify-around border-b border-slate-300")
                                    td(class="flex flex-[2] py-3")
                                        div(class="h-24 w-20 md:h-28 md:w-[90px]")
                                            img(class="w-full h-full object-cover" src=`/imgs/artwork/${item.image}` alt="")
                                        div(class="text-right")
                                            p(class="font-IRanSans text-sm md:text-base text-red font-semibold mr-4 mt-2")= item.artworkName
                                            p(class="font-dastnevis text-sm md:text-base font-semibold text-slate-700 mr-4")= item.category
                                            button(data-id=`${item._id}` class="cart-delete-btn font-IRanSans mr-4 mt-4 md:mt-5 bg-red px-4 text-white text-xs md:text-sm py-2 rounded-sm") حذف
                                    td(class="flex-1 flex justify-center items-center font-IRanSans font-semibold")= item.price
                                - totalPrice += item.price
                                if artworkIds.length > 0
                                    - artworkIds += ","
                                - artworkIds += item.artwork
                                
            if items.length !== 0
                div(class="mt-4 flex flex-col md:flex-row justify-between items-center")
                    div(class="flex font-IRanSans")
                        p(class="ml-4") مجموع:
                        p= `${totalPrice} افغانی`
                    button(id="buy-btn" data-artworks=`${artworkIds}` data-user=`${user._id}` class="font-IRanSans mt-6 md:mt-0 bg-red text-white py-2 inline-block w-36 rounded-sm hover:scale-105 transition-all duration-300") خرید

