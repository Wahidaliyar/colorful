extends dashbase 

block content 
    div(class="w-[85%] mr-[15%] pt-24 px-16")
        div(class="flex justify-between items-center")
            form(class="font-IRanSans flex-[2]")
                label(for="default-search" class="mb-2 text-sm font-medium text-gray-900 sr-only") Search
                div(class="relative")
                    div(class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none")
                        i(class="fa-solid fa-magnifying-glass text-slate-400")

                    input(type="search" id="users-search" class="block w-full p-[14px] pr-10 text-sm text-gray-900 border border-gray-300 rounded-md bg-gray-50 outline-none focus:border-redShade" placeholder="جستجو..." required)
                    button(id="users-search-btn" class="text-white absolute left-2 bottom-1.5 bg-red font-medium rounded-md text-sm px-4 py-[9px]") جستجو
                    

            div(class="flex-1")

        div(class="relative mt-4 pb-4 overflow-x-auto rounded-md shadow-[1px_2px_10px_-2px_rgba(0,0,0,0.5)]")
            table(class="w-full text-sm text-right")
                thead(class="font-IRanSans text-base text-slate-200 bg-redd")
                    tr
                        th(scope="col" class="px-6 py-4") #
                        th(scope="col" class="px-6 py-4") عکس
                        th(scope="col" class="px-6 py-4") نام کاربر
                        th(scope="col" class="px-6 py-4") ایمیل
                        th(scope="col" class="px-6 py-4") 
                            span(class="sr-only") info
                        
                tbody(class="font-IRanSans text-gray-900")
                    if Array.isArray(users)
                        each user in users
                            tr(class="bg-bgShade border-b")
                                td(class="px-6 py-4 font-semibold")= startIndex
                                td(scope="row" class="px-6 font-medium whitespace-nowrap")
                                    img(src=`/imgs/user/${user.photo}` alt="Profile" class="w-10 h-10 rounded-full")
                                td(class="px-6 py-4 font-semibold")= user.name
                                td(class="px-6 py-4")= user.email
                                td(class="px-6 py-4 text-right")
                                    button(id=`${user._id}` class="user-delete-btn bg-redd text-white px-3 py-1 rounded-md hover:underline") حذف
                            - startIndex = startIndex + 1
                    if users.length === 0
                        tr
                            td(class="pt-2 px-3") موردی یافت نشد!

            nav(aria-label="Page navigation" class="mt-4 flex justify-end w-[97%]")
                ul(class="flex items-center -space-x-px h-8 text-sm font-bold")

                    if num != 1
                        li
                            a(href=`/dashboard/users?page=${prev}` style=`${!prev ? "pointer-events: none" : ""}` class="flex items-center justify-center px-3 h-8 ml-0 leading-tight border rounded-r-lg text-red border-red hover:bg-bgShade")
                                span(class="sr-only") Previous
                                svg(class="w-2.5 h-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10")
                                    path(stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4")

                        each page in num
                            li
                                a(href=`/dashboard/users?page=${page}` class=`flex items-center justify-center px-3 h-8 leading-tight border border-red hover:bg-bgShade ${page == currentPage ? 'bg-red text-bg hover:bg-redd' : "text-red hover:bg-bgShade"}`)= page

                        li
                            a(href=`/dashboard/users?page=${next}` style=`${!next ? "pointer-events: none" : ""}` class="flex items-center justify-center px-3 h-8 leading-tight border rounded-l-lg text-red border-red hover:bg-bgShade")
                                span(class="sr-only") Next
                                svg(class="w-2.5 h-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10")
                                    path(stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 1 1 5l4 4")


    div(id="delete-user-popup" style="z-index: 500;" class="hidden fixed left-0 top-0 bottom-0 right-0 flex justify-center items-center font-IRanSans bg-slate-600 bg-opacity-60 backdrop backdrop-blur-sm")
        div(class="relative bg-white rounded-sm flex p-6 px-8 shadow-[1px_2px_10px_-2px_rgba(0,0,0,0.5)]")
            i(id="delete-user-popup-close" class="fa-solid fa-xmark absolute text-xl top-1.5 right-2 cursor-pointer")
            div(class="mt-3")
                div(class="flex justify-center items-center")
                    i(class="fa-solid fa-triangle-exclamation text-3xl ml-3")
                    p مطمئن‌اید که حذف شود؟

                div(class="mt-8")
                    button(id="delete-user-yes" class="bg-red ml-2 text-white w-[48%] py-2 rounded-sm cursor-pointer text-sm") بله!
                    button(id="delete-user-no" class="bg-slate-700 text-white w-[48%] py-2 rounded-sm cursor-pointer text-sm") لغو
